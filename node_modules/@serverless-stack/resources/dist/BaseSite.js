"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBuildCmdEnvironment = exports.buildErrorResponsesFor404ErrorPage = exports.buildErrorResponsesForRedirectToIndex = void 0;
const cdk = __importStar(require("aws-cdk-lib"));
function buildErrorResponsesForRedirectToIndex(indexPage) {
    return [
        {
            httpStatus: 403,
            responsePagePath: `/${indexPage}`,
            responseHttpStatus: 200,
        },
        {
            httpStatus: 404,
            responsePagePath: `/${indexPage}`,
            responseHttpStatus: 200,
        },
    ];
}
exports.buildErrorResponsesForRedirectToIndex = buildErrorResponsesForRedirectToIndex;
function buildErrorResponsesFor404ErrorPage(errorPage) {
    return [
        {
            httpStatus: 403,
            responsePagePath: `/${errorPage}`,
        },
        {
            httpStatus: 404,
            responsePagePath: `/${errorPage}`,
        },
    ];
}
exports.buildErrorResponsesFor404ErrorPage = buildErrorResponsesFor404ErrorPage;
/////////////////////
// Helper Functions
/////////////////////
function getBuildCmdEnvironment(siteEnvironment) {
    // Generate environment placeholders to be replaced
    // ie. environment => { API_URL: api.url }
    //     environment => API_URL="{{ API_URL }}"
    //
    const buildCmdEnvironment = {};
    Object.entries(siteEnvironment || {}).forEach(([key, value]) => {
        buildCmdEnvironment[key] = cdk.Token.isUnresolved(value)
            ? `{{ ${key} }}`
            : value;
    });
    return buildCmdEnvironment;
}
exports.getBuildCmdEnvironment = getBuildCmdEnvironment;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFzZVNpdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvQmFzZVNpdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxpREFBbUM7QUEwQm5DLFNBQWdCLHFDQUFxQyxDQUNuRCxTQUFpQjtJQUVqQixPQUFPO1FBQ0w7WUFDRSxVQUFVLEVBQUUsR0FBRztZQUNmLGdCQUFnQixFQUFFLElBQUksU0FBUyxFQUFFO1lBQ2pDLGtCQUFrQixFQUFFLEdBQUc7U0FDeEI7UUFDRDtZQUNFLFVBQVUsRUFBRSxHQUFHO1lBQ2YsZ0JBQWdCLEVBQUUsSUFBSSxTQUFTLEVBQUU7WUFDakMsa0JBQWtCLEVBQUUsR0FBRztTQUN4QjtLQUNGLENBQUM7QUFDSixDQUFDO0FBZkQsc0ZBZUM7QUFFRCxTQUFnQixrQ0FBa0MsQ0FDaEQsU0FBaUI7SUFFakIsT0FBTztRQUNMO1lBQ0UsVUFBVSxFQUFFLEdBQUc7WUFDZixnQkFBZ0IsRUFBRSxJQUFJLFNBQVMsRUFBRTtTQUNsQztRQUNEO1lBQ0UsVUFBVSxFQUFFLEdBQUc7WUFDZixnQkFBZ0IsRUFBRSxJQUFJLFNBQVMsRUFBRTtTQUNsQztLQUNGLENBQUM7QUFDSixDQUFDO0FBYkQsZ0ZBYUM7QUFPRCxxQkFBcUI7QUFDckIsbUJBQW1CO0FBQ25CLHFCQUFxQjtBQUVyQixTQUFnQixzQkFBc0IsQ0FBQyxlQUV0QztJQUNDLG1EQUFtRDtJQUNuRCwwQ0FBMEM7SUFDMUMsNkNBQTZDO0lBQzdDLEVBQUU7SUFDRixNQUFNLG1CQUFtQixHQUEyQixFQUFFLENBQUM7SUFDdkQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxlQUFlLElBQUksRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRTtRQUM3RCxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUM7WUFDdEQsQ0FBQyxDQUFDLE1BQU0sR0FBRyxLQUFLO1lBQ2hCLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDWixDQUFDLENBQUMsQ0FBQztJQUVILE9BQU8sbUJBQW1CLENBQUM7QUFDN0IsQ0FBQztBQWZELHdEQWVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2RrIGZyb20gXCJhd3MtY2RrLWxpYlwiO1xuaW1wb3J0ICogYXMgcm91dGU1MyBmcm9tIFwiYXdzLWNkay1saWIvYXdzLXJvdXRlNTNcIjtcbmltcG9ydCAqIGFzIGNsb3VkZnJvbnQgZnJvbSBcImF3cy1jZGstbGliL2F3cy1jbG91ZGZyb250XCI7XG5pbXBvcnQgKiBhcyBhY20gZnJvbSBcImF3cy1jZGstbGliL2F3cy1jZXJ0aWZpY2F0ZW1hbmFnZXJcIjtcblxuZXhwb3J0IGludGVyZmFjZSBCYXNlU2l0ZURvbWFpblByb3BzIHtcbiAgZG9tYWluTmFtZTogc3RyaW5nO1xuICBkb21haW5BbGlhcz86IHN0cmluZztcbiAgaG9zdGVkWm9uZT86IHN0cmluZyB8IHJvdXRlNTMuSUhvc3RlZFpvbmU7XG4gIGNlcnRpZmljYXRlPzogYWNtLklDZXJ0aWZpY2F0ZTtcbiAgYWx0ZXJuYXRlTmFtZXM/OiBzdHJpbmdbXTtcbiAgaXNFeHRlcm5hbERvbWFpbj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVNpdGVFbnZpcm9ubWVudE91dHB1dHNJbmZvIHtcbiAgcmVhZG9ubHkgcGF0aDogc3RyaW5nO1xuICByZWFkb25seSBzdGFjazogc3RyaW5nO1xuICByZWFkb25seSBlbnZpcm9ubWVudE91dHB1dHM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVNpdGVSZXBsYWNlUHJvcHMge1xuICByZWFkb25seSBmaWxlczogc3RyaW5nO1xuICByZWFkb25seSBzZWFyY2g6IHN0cmluZztcbiAgcmVhZG9ubHkgcmVwbGFjZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRFcnJvclJlc3BvbnNlc0ZvclJlZGlyZWN0VG9JbmRleChcbiAgaW5kZXhQYWdlOiBzdHJpbmdcbik6IGNsb3VkZnJvbnQuRXJyb3JSZXNwb25zZVtdIHtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBodHRwU3RhdHVzOiA0MDMsXG4gICAgICByZXNwb25zZVBhZ2VQYXRoOiBgLyR7aW5kZXhQYWdlfWAsXG4gICAgICByZXNwb25zZUh0dHBTdGF0dXM6IDIwMCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGh0dHBTdGF0dXM6IDQwNCxcbiAgICAgIHJlc3BvbnNlUGFnZVBhdGg6IGAvJHtpbmRleFBhZ2V9YCxcbiAgICAgIHJlc3BvbnNlSHR0cFN0YXR1czogMjAwLFxuICAgIH0sXG4gIF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEVycm9yUmVzcG9uc2VzRm9yNDA0RXJyb3JQYWdlKFxuICBlcnJvclBhZ2U6IHN0cmluZ1xuKTogY2xvdWRmcm9udC5FcnJvclJlc3BvbnNlW10ge1xuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIGh0dHBTdGF0dXM6IDQwMyxcbiAgICAgIHJlc3BvbnNlUGFnZVBhdGg6IGAvJHtlcnJvclBhZ2V9YCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGh0dHBTdGF0dXM6IDQwNCxcbiAgICAgIHJlc3BvbnNlUGFnZVBhdGg6IGAvJHtlcnJvclBhZ2V9YCxcbiAgICB9LFxuICBdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VTaXRlQ2RrRGlzdHJpYnV0aW9uUHJvcHNcbiAgZXh0ZW5kcyBPbWl0PGNsb3VkZnJvbnQuRGlzdHJpYnV0aW9uUHJvcHMsIFwiZGVmYXVsdEJlaGF2aW9yXCI+IHtcbiAgcmVhZG9ubHkgZGVmYXVsdEJlaGF2aW9yPzogY2xvdWRmcm9udC5BZGRCZWhhdmlvck9wdGlvbnM7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gSGVscGVyIEZ1bmN0aW9uc1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCdWlsZENtZEVudmlyb25tZW50KHNpdGVFbnZpcm9ubWVudD86IHtcbiAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xufSk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAvLyBHZW5lcmF0ZSBlbnZpcm9ubWVudCBwbGFjZWhvbGRlcnMgdG8gYmUgcmVwbGFjZWRcbiAgLy8gaWUuIGVudmlyb25tZW50ID0+IHsgQVBJX1VSTDogYXBpLnVybCB9XG4gIC8vICAgICBlbnZpcm9ubWVudCA9PiBBUElfVVJMPVwie3sgQVBJX1VSTCB9fVwiXG4gIC8vXG4gIGNvbnN0IGJ1aWxkQ21kRW52aXJvbm1lbnQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgT2JqZWN0LmVudHJpZXMoc2l0ZUVudmlyb25tZW50IHx8IHt9KS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICBidWlsZENtZEVudmlyb25tZW50W2tleV0gPSBjZGsuVG9rZW4uaXNVbnJlc29sdmVkKHZhbHVlKVxuICAgICAgPyBge3sgJHtrZXl9IH19YFxuICAgICAgOiB2YWx1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGJ1aWxkQ21kRW52aXJvbm1lbnQ7XG59XG4iXX0=