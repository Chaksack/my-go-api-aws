(this["webpackJsonpsst-console"]=this["webpackJsonpsst-console"]||[]).push([[0],{110:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var a=n(169),r=n(166),c=n(168),s=n(171),i=n(167),o=n(87),u=n(40),l=n(56),d=n(1),j=n.n(d),b=n(31),O=n.n(b),p=n(20),m=n.n(p),g=n(37),f=n(39),v=n(8),h=n(5),x=n(28),y=n(170),N=n(174),S=n(172),C=n(165),k=n(51),D=n(76),E=n(152),w=n(153),L=n(82),T={docsUrl:"https://docs.serverless-stack.com/",slackUrl:"https://serverless-stack.slack.com"},R=(n(110),n.p+"static/media/logo.352c4018.svg"),U=n(0);function A(e){var t=e.statusPanel;return Object(U.jsx)(k.a,{className:"BrandNavbar",variant:"dark",children:Object(U.jsxs)(L.a,{fluid:!0,children:[Object(U.jsx)(k.a.Brand,{href:"/",children:Object(U.jsx)("img",{alt:"",src:R,width:"100",className:"d-inline-block align-top"})}),Object(U.jsx)(k.a.Toggle,{}),Object(U.jsx)(k.a.Collapse,{children:t}),Object(U.jsxs)(k.a.Collapse,{className:"justify-content-end links",children:[Object(U.jsx)(D.a.Link,{title:"Slack",target:"_blank",rel:"noreferrer",className:"slack",href:T.slackUrl,children:Object(U.jsx)(E.a,{size:15})}),Object(U.jsx)(D.a.Link,{title:"Docs",target:"_blank",rel:"noreferrer",href:T.docsUrl,children:Object(U.jsx)(w.a,{})})]})]})})}var P=n(41),B=n.n(P),z=n(85),I=n(48),Q=n(155),F=n(156),_=n(4),V=n(84),q=n(154),J=(n(124),["loading"]),M={link:"link",danger:"outline-danger",primary:"outline-warning",secondary:"outline-light"};function W(e){var t=e.loading,n=void 0!==t&&t,a=Object(h.a)(e,J);return a=Object(_.a)(Object(_.a)({},a),{},{size:a.size||"lg",disabled:a.disabled||n,className:"Button ".concat(a.className||""),variant:M[a.variant]||M.secondary}),Object(U.jsxs)(V.a,Object(_.a)(Object(_.a)({},a),{},{children:[n&&Object(U.jsx)(q.a,{className:"spinner"}),a.children]}))}function G(e){var t=e.message,n=Object(d.useRef)(!1);return n.current||(window.alert(t),n.current=!0),null}n(125);function H(e){var t=e.loading,n=e.loadError,a=e.infraBuildStatus,r=e.infraBuildErrors,c=void 0===r?[]:r,s=e.infraDeployStatus,i=e.infraDeployErrors,o=void 0===i?[]:i,u=e.infraCanDeploy,l=e.infraCanQueueDeploy,j=e.infraDeployQueued,b=e.lambdaBuildStatus,O=e.lambdaBuildErrors,p=void 0===O?[]:O,h=e.handleDeploy,x=0,y=0,N=Object(d.useState)(!1),S=Object(v.a)(N,2),C=S[0],k=S[1],D=Object(d.useState)(null),E=Object(v.a)(D,2),w=E[0],L=E[1],T=Object(d.useState)(!1),R=Object(v.a)(T,2),A=R[0],P=R[1],_=function(){var e,t;u?"failed"===s?(e=!0,t="Retry"):(e=!0,t="Deploy"):l?(e=!0,t="Queue"):j?(e=!1,t="Queued"):(e=!1,t="Deploy");return[e,t]}(),V=Object(v.a)(_,2),q=V[0],J=V[1],M=C?"":"collapsed",H=q?"enabled":"";function K(){return $.apply(this,arguments)}function $(){return($=Object(g.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,e.next=4,h();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),L(e.t0);case 9:P(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return Object(d.useEffect)((function(){"building"!==a&&"building"!==b||k(!1)}),[a,b]),t||n||[].concat(Object(f.a)(c),Object(f.a)(o),Object(f.a)(p)).forEach((function(e){x+=e.errorCount||0,y+=e.warningCount||0})),Object(U.jsxs)("div",{className:"StatusPanel ".concat(M," ").concat(H),children:[w&&Object(U.jsx)(G,{message:w.message}),!t&&!n&&Object(U.jsx)(I.a,{in:C,children:Object(U.jsx)("div",{className:"error-logs",children:Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{className:"header",children:"Errors"}),Object(U.jsxs)("div",{className:"scroll-content",children:[function(){if(void 0!==a)return(c.length>0||o.length>0)&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("h3",{children:Object(U.jsx)("span",{children:"Infrastructure"})}),c.length>0&&Object(U.jsx)("div",{className:"content",children:c.map((function(e,t){var n=e.type,a=e.message;return Object(U.jsxs)("div",{className:"error-type",children:[Object(U.jsxs)("h5",{children:[n," Errors"]}),Object(U.jsx)("pre",{children:Object(U.jsx)(B.a,{children:a})})]},t)}))}),o.length>0&&Object(U.jsx)("div",{className:"content",children:o.map((function(e,t){var n=e.type,a=e.message;return Object(U.jsxs)("div",{className:"error-type",children:[Object(U.jsxs)("h5",{children:[n," Errors"]}),Object(U.jsx)("pre",{children:Object(U.jsx)(B.a,{children:a})})]},t)}))})]})}(),function(){if(void 0!==b)return p.length>0&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("h3",{children:Object(U.jsx)("span",{children:"Functions"})}),Object(U.jsx)("div",{className:"content",children:p.map((function(e,t){var n=e.type,a=e.message;return Object(U.jsxs)("div",{className:"error-type",children:[Object(U.jsxs)("h5",{children:[n," Errors"]}),Object(U.jsx)("pre",{children:Object(U.jsx)(B.a,{children:a})})]},t)}))})]})}()]})]})})}),Object(U.jsxs)("div",{className:"footer",children:[Object(U.jsxs)("div",{className:"status",children:[t&&Object(U.jsx)("span",{children:"\xa0"}),n&&Object(U.jsx)("p",{className:"error",children:"Failed to load"}),!t&&!n&&Object(U.jsxs)(U.Fragment,{children:[(x>0||y>0)&&Object(U.jsxs)("div",{className:"counts",onClick:function(){return k(!C)},children:[x>0&&Object(U.jsxs)("span",{className:"errors",children:[Object(U.jsx)(Q.a,{size:14}),Object(U.jsx)("span",{children:x})]}),y>0&&Object(U.jsxs)("span",{className:"warnings",children:[Object(U.jsx)(F.a,{size:14}),Object(U.jsx)("span",{children:y})]})]}),0===x&&0===y&&Object(U.jsx)("div",{className:"watcher-message",children:"Watching changes\u2026"})]})]}),Object(U.jsxs)("div",{className:"controls",children:[function(){var e="building"===a||"building"===b,t="deploying"===s;return(e||t)&&Object(U.jsxs)("span",{className:"spinner",children:[Object(U.jsx)(z.a,{size:"sm",animation:"border",variant:"secondary",role:"status",children:Object(U.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),e&&Object(U.jsx)("span",{className:"building",children:"Building"}),t&&Object(U.jsx)("span",{className:"deploying",children:"Deploying"})]})}(),Object(U.jsx)(W,{size:"sm",onClick:K,loading:A,disabled:!q,variant:q?"secondary":"primary",children:J})]})]})]})}n(126);function K(e){var t=e.connected,n=void 0!==t&&t,a=n?"connected":"disconnected";return Object(U.jsxs)("div",{className:"WsStatusPanel ".concat(a),title:n?"Connected to local dev environment":"Not connected to local dev environment",children:[Object(U.jsx)("div",{className:"indicator"}),Object(U.jsx)("span",{children:n?"Connected":"Disconnected"})]})}var $=n(159),X=n(157),Y=(n(127),["name","values"]);function Z(e){var t=e.name,n=e.values,a=(Object(h.a)(e,Y),Object(d.useRef)({})),r=Object(d.useState)(!1),c=Object(v.a)(r,2),s=c[0],i=c[1];function o(){i(!1)}return Object(U.jsxs)("div",{className:"KeyValueItem",children:[Object(U.jsx)("p",{className:"name",children:t}),n.map((function(e,t){return Object(U.jsxs)("div",{className:"value",children:[Object(U.jsxs)("div",{children:[e.url&&Object(U.jsx)("a",{target:"_blank",rel:"noreferrer",href:e.url,children:e.text||(n=e.url,n.replace(/^https?:\/\//,""))}),!e.url&&Object(U.jsx)("input",{readOnly:!0,value:e,onBlur:o,ref:function(e){return a.current[t]=e}})]}),Object(U.jsx)("div",{children:!e.url&&Object(U.jsxs)(U.Fragment,{children:[s===t&&Object(U.jsx)("span",{className:"status",children:"Copied!"}),Object(U.jsx)(W,{size:"md",variant:"link",onClick:function(){return function(e,t){a.current[t].select(),document.execCommand("copy"),a.current[t].focus(),i(t)}(0,t)},className:s===t?"copied":"",disabled:!document.queryCommandSupported("copy"),children:Object(U.jsx)(X.a,{size:14})})]})})]},t);var n}))]})}var ee=n(158),te=(n(128),["type","name","expanded"]);function ne(e){var t=e.type,n=e.name,a=e.expanded,r=void 0!==a&&a,c=Object(h.a)(e,te),s=Object(d.useState)(r),i=Object(v.a)(s,2),o=i[0],u=i[1],l=o?"expanded":"collapsed";return Object(U.jsxs)("div",{className:"CollapsiblePanel ".concat(l),children:[Object(U.jsxs)("div",{className:"header",onClick:function(){return u(!o)},children:[Object(U.jsxs)("div",{className:"copy",children:[Object(U.jsx)("span",{children:t}),Object(U.jsx)("h1",{children:n})]}),Object(U.jsx)("span",{className:"icon",children:Object(U.jsx)(ee.a,{})})]}),Object(U.jsx)(I.a,{in:o,children:Object(U.jsx)("div",{className:"body",children:Object(U.jsx)("div",{children:c.children})})})]})}n(129);function ae(e){var t=e.type,n=e.name,a=e.httpApiEndpoint,r=e.restApiEndpoint,c=e.customDomainUrl,s=e.routes,i=a||r;return Object(U.jsx)("div",{className:"ApiConstructPanel",children:Object(U.jsxs)(ne,{type:t,name:n,children:[Object(U.jsx)(Z,{name:"URL",values:[{url:i}]}),c&&Object(U.jsx)(Z,{name:"Custom Domain URL",values:[{url:c}]}),Object.keys(s).length>0&&Object(U.jsx)(Z,{name:"Routes",values:s.map((function(e){return function(e,t){var n,a=t.route;if("$default"===a)n="".concat(e,"/").concat(a);else{var r=a.split(" "),c=Object(v.a)(r,2)[1];n="".concat(e).concat(c)}return{url:n,text:a}}(c||i,e)}))})]})})}n(130);function re(e){var t=e.type,n=e.name,a=e.schedule,r=e.ruleName,c=e.triggering,s=e.onTrigger;return Object(U.jsx)("div",{className:"CronConstructPanel",children:Object(U.jsxs)(ne,{type:t,name:n,children:[Object(U.jsx)(Z,{name:"Schedule",values:[a]}),Object(U.jsxs)("div",{className:"controls",children:[Object(U.jsx)("p",{children:"Trigger function"}),Object(U.jsx)(W,{size:"sm",loading:c,onClick:function(){return s({type:t,ruleName:r})},children:"Trigger"})]})]})})}n(131);function ce(e){var t=e.type,n=e.name,a=e.keyValues;return Object(U.jsx)("div",{className:"BasicConstructPanel",children:Object(U.jsx)(ne,{type:t,name:n,children:Object.entries(a).filter((function(e){var t=Object(v.a)(e,2);t[0];return void 0!==t[1]})).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(U.jsx)(Z,{name:n,values:[a]},n)}))})})}var se=n(16);n(132);function ie(e){var t=e.fields,n=void 0===t?[]:t,a=e.button;return Object(U.jsxs)(se.a,{className:"PayloadForm",children:[Object.entries(n).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(U.jsxs)(se.a.Group,{controlId:"field-".concat(n),children:[Object(U.jsx)(se.a.Label,{children:n}),a]})})),a]})}n(133);var oe=JSON.stringify({data:"placeholder"},null,2);function ue(e){var t=e.type,n=e.name,a=e.queueUrl,r=e.triggering,c=e.onTrigger,s=Object(d.useState)(oe),i=Object(v.a)(s,2),o=i[0],u=i[1];return Object(U.jsx)("div",{className:"QueueConstructPanel",children:Object(U.jsxs)(ne,{type:t,name:n,children:[Object(U.jsx)(Z,{name:"Queue URL",values:[a]}),Object(U.jsx)(ie,{fields:{Message:Object(U.jsx)(se.a.Control,{rows:3,size:"sm",as:"textarea",onChange:function(e){return u(e.target.value)},value:o})},button:Object(U.jsx)(W,{size:"sm",loading:r,onClick:function(){return c({type:t,queueUrl:a,payload:o})},children:"Send Message"})})]})})}n(134);var le=JSON.stringify({data:"placeholder"},null,2);function de(e){var t=e.type,n=e.name,a=e.topicArn,r=e.triggering,c=e.onTrigger,s=Object(d.useState)(le),i=Object(v.a)(s,2),o=i[0],u=i[1];return Object(U.jsx)("div",{className:"TopicConstructPanel",children:Object(U.jsxs)(ne,{type:t,name:n,children:[Object(U.jsx)(Z,{name:"Topic ARN",values:[a]}),Object(U.jsx)(ie,{fields:{Message:Object(U.jsx)(se.a.Control,{rows:3,size:"sm",as:"textarea",value:o,onChange:function(e){return u(e.target.value)}})},button:Object(U.jsx)(W,{size:"sm",loading:r,onClick:function(){return c({type:t,topicArn:a,payload:o})},children:"Publish Message"})})]})})}n(135);var je=JSON.stringify({data:"placeholder"},null,2);function be(e){var t=e.type,n=e.name,a=e.eventBusName,r=e.defaultSource,c=e.defaultDetailType,s=e.triggering,i=e.onTrigger,o=Object(d.useState)(r),u=Object(v.a)(o,2),l=u[0],j=u[1],b=Object(d.useState)(c),O=Object(v.a)(b,2),p=O[0],m=O[1],g=Object(d.useState)(je),f=Object(v.a)(g,2),h=f[0],x=f[1];return Object(U.jsx)("div",{className:"EventBusConstructPanel",children:Object(U.jsxs)(ne,{type:t,name:n,children:[Object(U.jsx)(Z,{name:"EventBus Name",values:[a]}),Object(U.jsx)(ie,{fields:{"Event source":Object(U.jsx)(se.a.Control,{size:"sm",type:"text",onChange:function(e){return j(e.target.value)},value:l}),"Event detail type":Object(U.jsx)(se.a.Control,{size:"sm",type:"text",onChange:function(e){return m(e.target.value)},value:p}),"Event Detail":Object(U.jsx)(se.a.Control,{rows:3,size:"sm",as:"textarea",onChange:function(e){return x(e.target.value)},value:h})},button:Object(U.jsx)(W,{size:"sm",loading:s,onClick:function(){return i({type:t,eventBusName:a,source:l,detailType:p,payload:h})},children:"Invoke"})})]})})}n(136);var Oe=JSON.stringify({data:"placeholder"},null,2);function pe(e){var t=e.type,n=e.name,a=e.functionArn,r=e.functionName,c=e.triggering,s=e.onTrigger,i=Object(d.useState)(Oe),o=Object(v.a)(i,2),u=o[0],l=o[1];return Object(U.jsx)("div",{className:"FunctionConstructPanel",children:Object(U.jsxs)(ne,{type:t,name:n,children:[Object(U.jsx)(Z,{name:"Function Name",values:[r]}),Object(U.jsx)(ie,{fields:{Message:Object(U.jsx)(se.a.Control,{rows:3,size:"sm",as:"textarea",onChange:function(e){return l(e.target.value)},value:u})},button:Object(U.jsx)(W,{size:"sm",loading:c,onClick:function(){return s({type:t,functionArn:a,payload:u})},children:"Invoke"})})]})})}n(137);function me(e){var t=e.type,n=e.name,a=e.httpApiEndpoint,r=e.customDomainUrl,c=e.routes;return Object(U.jsx)("div",{className:"WebSocketApiConstructPanel",children:Object(U.jsxs)(ne,{type:t,name:n,children:[Object(U.jsx)(Z,{name:"URL",values:[{url:a}]}),r&&Object(U.jsx)(Z,{name:"Custom Domain URL",values:[{url:r}]}),Object.keys(c).length>0&&Object(U.jsx)(Z,{name:"Routes",values:c.map((function(e){return function(e,t){var n=t.route;return{url:"".concat(e,"/").concat(n),text:n}}(r||a,e)}))})]})})}n(138);var ge=JSON.stringify({data:"placeholder"},null,2);function fe(e){var t=e.type,n=e.name,a=e.streamName,r=e.triggering,c=e.onTrigger,s=Object(d.useState)(ge),i=Object(v.a)(s,2),o=i[0],u=i[1];return Object(U.jsx)("div",{className:"KinesisStreamConstructPanel",children:Object(U.jsxs)(ne,{type:t,name:n,children:[Object(U.jsx)(Z,{name:"Stream Name",values:[a]}),Object(U.jsx)(ie,{fields:{Record:Object(U.jsx)(se.a.Control,{rows:3,size:"sm",as:"textarea",value:o,onChange:function(e){return u(e.target.value)}})},button:Object(U.jsx)(W,{size:"sm",loading:r,onClick:function(){return c({type:t,streamName:a,payload:o})},children:"Put Record"})})]})})}function ve(e){console.log(e),window.alert(e.message)}n(139);var he=["construct","handleTrigger"];function xe(e){var t=e.construct,n=e.handleTrigger,a=(Object(h.a)(e,he),Object(d.useState)(!1)),r=Object(v.a)(a,2),c=r[0],s=r[1];function i(e){return o.apply(this,arguments)}function o(){return(o=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,n(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),ve(e.t0);case 9:s(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return Object(U.jsx)("div",{className:"ConstructPanel",children:function(){switch(t.type){case"Auth":return function(e){var t=e.type,n=e.name,a=e.identityPoolId;return Object(U.jsx)(ce,{type:t,name:n,keyValues:{"Identity Pool ID":a}})}(t);case"Api":case"ApiGatewayV1Api":return function(e){return Object(U.jsx)(ae,Object(_.a)({},e))}(t);case"ApolloApi":return function(e){var t=e.type,n=e.name,a=e.httpApiEndpoint,r=e.customDomainUrl;return Object(U.jsx)(ce,{type:t,name:n,keyValues:{URL:{url:a},"Custom Domain URL":r?{url:r}:void 0}})}(t);case"AppSyncApi":return function(e){var t=e.type,n=e.name,a=e.graphqlApiEndpoint,r=e.realtimeApiEndpoint;return Object(U.jsx)(ce,{type:t,name:n,keyValues:{"GraphQL URL":{url:a},"WebSocket URL":{url:r}}})}(t);case"WebSocketApi":return function(e){return Object(U.jsx)(me,Object(_.a)({},e))}(t);case"Queue":return function(e){return Object(U.jsx)(ue,Object(_.a)(Object(_.a)({},e),{},{triggering:c,onTrigger:i}))}(t);case"Topic":return function(e){return Object(U.jsx)(de,Object(_.a)(Object(_.a)({},e),{},{triggering:c,onTrigger:i}))}(t);case"Cron":return function(e){return Object(U.jsx)(re,Object(_.a)(Object(_.a)({},e),{},{triggering:c,onTrigger:i}))}(t);case"Bucket":return function(e){var t=e.type,n=e.name,a=e.bucketName;return Object(U.jsx)(ce,{type:t,name:n,keyValues:{"Bucket Name":a}})}(t);case"Table":return function(e){var t=e.type,n=e.name,a=e.tableName;return Object(U.jsx)(ce,{type:t,name:n,keyValues:{"Table Name":a}})}(t);case"EventBus":return function(e){e.type,e.name,e.eventBusName;return Object(U.jsx)(be,Object(_.a)(Object(_.a)({},t),{},{triggering:c,onTrigger:i}))}(t);case"KinesisStream":return function(e){return Object(U.jsx)(fe,Object(_.a)(Object(_.a)({},e),{},{triggering:c,onTrigger:i}))}(t);case"StaticSite":return function(e){var t=e.type,n=e.name,a=e.endpoint,r=e.customDomainUrl;return Object(U.jsx)(ce,{type:t,name:n,keyValues:{URL:{url:a},"Custom Domain URL":r?{url:r}:void 0}})}(t);case"ReactStaticSite":return function(e){var t=e.type,n=e.name,a=e.endpoint,r=e.customDomainUrl;return Object(U.jsx)(ce,{type:t,name:n,keyValues:{URL:{url:a},"Custom Domain URL":r?{url:r}:void 0}})}(t);case"NextjsSite":return function(e){var t=e.type,n=e.name,a=e.endpoint,r=e.customDomainUrl;return Object(U.jsx)(ce,{type:t,name:n,keyValues:{URL:{url:a},"Custom Domain URL":r?{url:r}:void 0}})}(t);case"Function":return function(e){return Object(U.jsx)(pe,Object(_.a)(Object(_.a)({},e),{},{triggering:c,onTrigger:i}))}(t);default:return}}()})}n(140);function ye(e){return Object(U.jsx)("div",{className:"LoadingSpinner",children:Object(U.jsxs)("div",{className:"spinner",children:[Object(U.jsx)("div",{className:"bounce1"}),Object(U.jsx)("div",{className:"bounce2"}),Object(U.jsx)("div",{className:"bounce3"})]})})}n(141);function Ne(e){var t=e.loading,n=e.loadError,a=e.constructs,r=e.handleTrigger,c=t||n?"loading":"";return Object(U.jsxs)("div",{className:"ConstructsPanel ".concat(c),children:[t&&Object(U.jsx)(ye,{}),n&&Object(U.jsxs)("div",{className:"error",children:[Object(U.jsx)($.a,{}),Object(U.jsx)("p",{children:"Failed to load"})]}),!t&&!n&&a&&a.map((function(e,t){return Object(U.jsx)(xe,{construct:e,handleTrigger:r},t)}))]})}n(142);function Se(e){var t=e.log,n=Object(d.useState)(!1),a=Object(v.a)(n,2),r=a[0],c=a[1],s=t.metadata&&JSON.parse(t.metadata),i=function(){if(!s)return;if(s.event)return"event";if(s.response)return"response"}();return Object(U.jsxs)("pre",{children:[Object(U.jsx)(B.a,{children:t.message}),s&&Object(U.jsx)(W,{variant:"link",size:"sm",onClick:function(){return c(!r)},children:r?"hide ".concat(i):"show ".concat(i)}),s&&r&&Object(U.jsx)("div",{children:Object(U.jsx)(B.a,{children:JSON.stringify(s,null,2)})})]})}n(143);function Ce(e){var t=e.loading,n=e.loadError,a=e.logs,r=e.onClear,c=Object(d.useRef)(null),s=Object(d.useRef)(null),i=Object(d.useRef)(null),o=a&&a.length>0,u=a?a.length:void 0;return Object(d.useLayoutEffect)((function(){if(void 0!==u){var e=c.current;(null===s.current||s.current-e.scrollTop-i.current<1)&&(e.scrollTop=e.scrollHeight),s.current=e.scrollHeight,i.current=e.clientHeight}}),[u]),Object(U.jsxs)("div",{className:"RuntimeLogsPanel",children:[Object(U.jsxs)("div",{className:"header",children:[Object(U.jsx)("span",{children:"Logs"}),Object(U.jsx)(W,{variant:"link",size:"sm",disabled:!o,onClick:r,children:"Clear"})]}),Object(U.jsxs)("div",{ref:c,className:"content",children:[t&&Object(U.jsx)(ye,{}),n&&Object(U.jsx)("p",{className:"error",children:"Failed to load"}),!t&&!n&&a&&Object(U.jsxs)(U.Fragment,{children:[!o&&Object(U.jsx)("p",{className:"loading",children:"Listening for logs..."}),o&&a.map((function(e,t){return Object(U.jsx)(Se,{log:e},t)}))]})]})]})}n(144);var ke,De,Ee,we,Le,Te,Re,Ue,Ae,Pe,Be=["wsClient"],ze=Object(y.a)(ke||(ke=Object(x.a)(["\n  query GetConstructs {\n    getConstructs {\n      error\n      isLoading\n      constructs\n    }\n  }\n"]))),Ie=Object(y.a)(De||(De=Object(x.a)(["\n  query GetRuntimeLogs {\n    getRuntimeLogs {\n      message\n      metadata\n    }\n  }\n"]))),Qe=Object(y.a)(Ee||(Ee=Object(x.a)(["\n  query GetInfraStatus {\n    getInfraStatus {\n      buildStatus\n      buildErrors {\n        type\n        message\n        errorCount\n        warningCount\n      }\n      deployStatus\n      deployErrors {\n        type\n        message\n        errorCount\n        warningCount\n      }\n      canDeploy\n      canQueueDeploy\n      deployQueued\n    }\n  }\n"]))),Fe=Object(y.a)(we||(we=Object(x.a)(["\n  query GetLambdaStatus {\n    getLambdaStatus {\n      buildStatus\n      buildErrors {\n        type\n        message\n        errorCount\n        warningCount\n      }\n    }\n  }\n"]))),_e=Object(y.a)(Le||(Le=Object(x.a)(["\n  subscription OnConstructsUpdated {\n    constructsUpdated {\n      error\n      isLoading\n      constructs\n    }\n  }\n"]))),Ve=Object(y.a)(Te||(Te=Object(x.a)(["\n  subscription OnRuntimeLogAdded {\n    runtimeLogAdded {\n      message\n      metadata\n    }\n  }\n"]))),qe=Object(y.a)(Re||(Re=Object(x.a)(["\n  subscription OnInfraStatusUpdated {\n    infraStatusUpdated {\n      buildStatus\n      buildErrors {\n        type\n        message\n      }\n      deployStatus\n      deployErrors {\n        type\n        message\n      }\n      canDeploy\n      canQueueDeploy\n      deployQueued\n    }\n  }\n"]))),Je=Object(y.a)(Ue||(Ue=Object(x.a)(["\n  subscription OnLambdaStatusUpdated {\n    lambdaStatusUpdated {\n      buildStatus\n      buildErrors {\n        type\n        message\n      }\n    }\n  }\n"]))),Me=Object(y.a)(Ae||(Ae=Object(x.a)(["\n  mutation InvokeConstruct($data: String) {\n    invoke(data: $data)\n  }\n"]))),We=Object(y.a)(Pe||(Pe=Object(x.a)(["\n  mutation Deploy {\n    deploy\n  }\n"])));function Ge(e){var t=e.wsClient,n=(Object(h.a)(e,Be),Object(d.useState)(!1)),a=Object(v.a)(n,2),r=a[0],c=a[1];t.onConnected(M),t.onReconnected(M),t.onDisconnected((function(){c(!1)}));var s=Object(N.a)(Me),i=Object(v.a)(s,1)[0],o=Object(N.a)(We),u=Object(v.a)(o,1)[0],l=Object(S.a)(ze),j=l.loading,b=l.error,O=l.data,p=l.subscribeToMore;O&&O.getConstructs&&(b=O.getConstructs.error,O=JSON.parse(O.getConstructs.constructs));var x=Object(S.a)(Ie),y=x.loading,k=x.error,D=x.data,E=x.refetch,w=x.subscribeToMore,L=Object(S.a)(Qe),T=L.loading,R=L.error,P=L.data,B=L.subscribeToMore,z=Object(S.a)(Fe),I=z.loading,Q=z.error,F=z.data,_=z.subscribeToMore;function V(){return(V=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({variables:{data:JSON.stringify(t)}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(g.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.clearStore();case 2:E();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){b||k||R||Q?window.location.reload():c(!0)}return Object(d.useEffect)((function(){try{p({document:_e,updateQuery:function(e,t){var n=t.subscriptionData;return n.data?{getConstructs:n.data.constructsUpdated}:e}}),w({document:Ve,updateQuery:function(e,t){var n=t.subscriptionData;return n.data?{getRuntimeLogs:[].concat(Object(f.a)(e.getRuntimeLogs||[]),[n.data.runtimeLogAdded])}:e}}),B({document:qe,updateQuery:function(e,t){var n=t.subscriptionData;return n.data?{getInfraStatus:n.data.infraStatusUpdated}:e}}),_({document:Je,updateQuery:function(e,t){var n=t.subscriptionData;return n.data?{getLambdaStatus:n.data.lambdaStatusUpdated}:e}})}catch(e){throw e}}),[p,B,_,w]),Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)(A,{statusPanel:Object(U.jsx)(K,{connected:r})}),Object(U.jsxs)("div",{className:"panels",children:[Object(U.jsx)("div",{className:"left",children:Object(U.jsx)(Ne,{constructs:O,handleTrigger:function(e){return V.apply(this,arguments)},loading:j,loadError:b})}),Object(U.jsxs)("div",{className:"right",children:[Object(U.jsx)(C.a,{children:function(e){return Object(U.jsx)(Ce,{loading:y,loadError:k,logs:null===D||void 0===D?void 0:D.getRuntimeLogs,onClear:function(){return function(e){return J.apply(this,arguments)}(e)}})}}),Object(U.jsx)(H,{loading:T||I,loadError:R||Q,infraBuildStatus:null===P||void 0===P?void 0:P.getInfraStatus.buildStatus,infraBuildErrors:null===P||void 0===P?void 0:P.getInfraStatus.buildErrors,infraDeployStatus:null===P||void 0===P?void 0:P.getInfraStatus.deployStatus,infraDeployErrors:null===P||void 0===P?void 0:P.getInfraStatus.deployErrors,infraCanDeploy:null===P||void 0===P?void 0:P.getInfraStatus.canDeploy,infraCanQueueDeploy:null===P||void 0===P?void 0:P.getInfraStatus.canQueueDeploy,infraDeployQueued:null===P||void 0===P?void 0:P.getInfraStatus.deployQueued,lambdaBuildStatus:null===F||void 0===F?void 0:F.getLambdaStatus.buildStatus,lambdaBuildErrors:null===F||void 0===F?void 0:F.getLambdaStatus.buildErrors,handleDeploy:function(){return q.apply(this,arguments)}})]})]})]})}var He=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,175)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},Ke=(n(146),n(147),window.location.hostname),$e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SST_PORT||window.location.port,Xe=new a.a({uri:"http://".concat(Ke,":").concat($e,"/graphql")}),Ye=new l.SubscriptionClient("ws://".concat(Ke,":").concat($e,"/graphql"),{reconnect:!0}),Ze=new o.a(Ye),et=Object(r.a)((function(e){var t=e.query,n=Object(u.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),Ze,Xe),tt=new c.a({link:et,cache:new s.a});O.a.render(Object(U.jsx)(j.a.StrictMode,{children:Object(U.jsx)(i.a,{client:tt,children:Object(U.jsx)(Ge,{wsClient:Ye})})}),document.getElementById("root")),He()}},[[148,1,2]]]);
//# sourceMappingURL=main.4b8480aa.chunk.js.map